<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="A Cylon.JS code example" name="description">
<meta content="The Hybrid Group" name="author">
<title>Cylon.JS Example - Raspberry Pi - Servo</title>
<link href="/stylesheets/style.css" rel="stylesheet">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script src="/javascript/script.js"></script><script src="/hybridpages/assets/javascript/subnav.js"></script><link href="//fonts.googleapis.com/css?family=Inconsolata:400,700%7CMontserrat:700" rel="stylesheet">
<link href="/favicon.ico" rel="shortcut icon" type="image/gif">
<script type="text/javascript">


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46433484-2', {"cookieDomain":"cylonjs.com"});











   ga('send', 'pageview');


</script></head>
<body>
    
    <div class="app">
      <div class="w">
        <header class="app-header" role="banner"><div class="display">
            <h1 class="app-logo">
              <a href="/">Cylon</a>
            </h1>
            <span class="subtitle">
              <div class="main"></div>
            </span>
          </div>
          <span class="menu">
            <a class="active" href="/documentation">Docs</a>
            <a href="/documentation/platforms" class="item">Platforms</a>
            
            <a href="/blog" class="item">Blog</a>
            <a class="item" target="_blank" href="https://github.com/hybridgroup/cylon/">Github</a>
          </span>
        </header>
</div>
      <div class="page-title">
        <div class="w">
          <h1 class="title">Example: Raspberry Pi - Servo</h1>
          <h2 class="subtitle"><a href="https://github.com/hybridgroup/cylon-raspi/tree/master/examples/servo" target="_blank">View In Repo</a></h2>
        </div>
      </div>
      <div class="container">
        <div class="main" role="main">
          <section class="content full"><div class="documentation">
              <h1 id="raspberry-pi---servo">Raspberry Pi - Servo</h1>
              
              <p>For this example, similar in structure to the led_brightness example, we're
              going to take a Raspberry Pi, and modify the angle of an attached servo such
              that it's continually turning back and forth.</p>
              
              <p>Before we get started, make sure to have the <code>cylon-raspi</code> module installed.</p>
              
              <p>First, let's require Cylon:</p>
              
              <pre class="CodeRay"><span class="keyword">var</span> Cylon = require(<span class="string"><span class="delimiter">'</span><span class="content">cylon</span><span class="delimiter">'</span></span>);
</pre>
              
              <p>Now we can start defining our robot:</p>
              
              <pre class="CodeRay">Cylon.robot({
</pre>
              
              <p>We'll be connecting to an Raspberry Pi, and using a servo attached to the
              Raspberry Pi on pin 11.</p>
              
              <pre class="CodeRay">  connection: { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">raspi</span><span class="delimiter">'</span></span>, <span class="key">adaptor</span>: <span class="string"><span class="delimiter">'</span><span class="content">raspi</span><span class="delimiter">'</span></span>, <span class="key">port</span>: <span class="string"><span class="delimiter">'</span><span class="content">/dev/ttyACM0</span><span class="delimiter">'</span></span> },
  <span class="key">device</span>: { <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">servo</span><span class="delimiter">'</span></span>, <span class="key">driver</span>: <span class="string"><span class="delimiter">'</span><span class="content">servo</span><span class="delimiter">'</span></span>, <span class="key">pin</span>: <span class="integer">11</span> },
</pre>
              
              <p>We'll start defining the work for our robot next:</p>
              
              <pre class="CodeRay">  <span class="function">work</span>: <span class="keyword">function</span>(my) {
</pre>
              
              <p>We'll define variables to hold our servo's angle, and the rate at which that
              angle will change:</p>
              
              <pre class="CodeRay">    <span class="keyword">var</span> angle = <span class="integer">30</span>,
        increment = <span class="integer">40</span>;
</pre>
              
              <p>Every second, we'll increment the <code>angle</code>, set the servo to run at that angle,
              and log the angle we're running at to the console. We'll also make sure to
              change the increment if the angle is at the upper/lower bounds of the values
              supported:</p>
              
              <pre class="CodeRay">    every((<span class="integer">1</span>).seconds(), <span class="keyword">function</span>() {
      angle += increment;
      my.servo.angle(angle);
      console.log(<span class="string"><span class="delimiter">"</span><span class="content">Current Angle: </span><span class="delimiter">"</span></span> + (my.servo.currentAngle()));

      <span class="keyword">if</span> ((angle === <span class="integer">30</span>) || (angle === <span class="integer">150</span>)) { increment = -increment; }
    });
  }
</pre>
              
              <p>And with all that done, we can now start our robot:</p>
              
              <pre class="CodeRay">}).start();
</pre>
            </div>
          </section>
</div>
      </div>
    </div>
    <footer class="app-footer"><div class="w">
        <div class="copyright">
          <div class="left-side">
            Â© Copyright 2012-2014
            <a href="http://hybridgroup.com" id="THG-logo" target="_blank">
              <img alt="The Hybrid Group" src="/images/elements/THG_logo.png"></a>
          </div>
          <div class="right-side">
            <a href="#top">Top</a>
          </div>
          <div class="clear"></div>
        </div>
      </div>
    </footer>
</body>
</html>
